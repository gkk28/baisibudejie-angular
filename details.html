<!DOCTYPE html>
<html ng-app="myApp">
	<head>
		<meta charset="UTF-8">
		
		<title>百思不得姐</title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
	</head>
	<body ng-controller="login">
		<nav class="idx-nav">
			<div class="idx-nav-cot">
				<div class="idx-nav-logo"><a href="index.html#video"></a></div>
				<ul class="idx-nav-ul">
					<li style="background-color:#a0032d;"><a href="index.html#video">视频</a></li>
					<li><a href="index.html#img">图片</a></li>
					<li><a href="index.html#textt">段子</a></li>
					<li><a href="index.html#voice">声音</a></li>
					<li><a href="index.html#">排行</a></li>
				</ul>
				<div class="idx-search">
					<input type="text" placeholder="请输入你要搜索的内容"/>
					<i class="iconfont">&#xe741;</i>
				</div> 	
				<div class="idx-Login">
					<a  href="javascript:;" ng-click="logRegYes()" id="loginBtn">登录</a>
					<a  href="javascript:;"  id="userName" style="display: none; position: relative; left: -80px;">{{dataUsername}}</a>
					<em>|</em>
					<a href="javascript:;" ng-click="regYes()" id="registerBtn">注册</a>
					<a href="javascript:;"  id="tuichuBtn" style="display: none; position: relative; top: -120px;" ng-click="SignOut()">退出</a> 
				</div>
			</div>
		</nav>
		<div class="idx-content">
			<div class="idx-cotLeft">
				<p class="idxLtit"><a href="#">精华</a></p>
				<div class="contentWrap" ng-controller="details">
					<div class="content" >
						<div class="cot-top">
							<div class="u-img">
								<img ng-src="{{profile_image}}"/> <!--图片地址-->
							</div>
							<div class="u-txt">
								<a href="#">{{name}}</a>    <!--用户名-->
							</div>
							<span class="u-time">{{ct}}</span>   <!--创建时间-->
						</div>
						<p class="videoTxt">{{text}}</p>  <!--文本-->
						<div class="u-content">
							<div class="u-video">
								<video ng-src="{{videoUrl(video_uri)}}"></video>  <!--视频地址-->
								<i id="videoBtn" ng-click="videoPlay($event)"></i>     <!--播放按钮-->
							</div>
						</div>
						<div class="cot-tool">
							<i class="u-love">{{love}}</i>   <!--喜欢-->
							<em class="u-hate">{{hate}}</em>   <!--不喜欢-->
							<i class="u-share">{{fxNum}}</i>   <!--随机数-->
							<div class="u-down"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="idx-cotRight" ng-controller="idx-cotR">
				<div class="hotVideo">
					<p class="idxRtit">百思不得姐网友都在看</p>
					<div class="hotVideoDiv">
						<a href="#video" ng-repeat='data in VideoLove2'  ng-click="toDetails(data)">
							<video  ng-src="{{videoUrl(data.video_uri)}}"  ></video>
							<p>{{data.text}}</p>
							<i></i>
						</a>
					</div>
				</div>
			</div>
		</div>
		<!--登录-->
		<div id="log-wrapper" class="log-wrap">
			<div class="log-login-box" id="login-box">
				<div class="log-box-1">
					<div class="log-login-dialog-header">
						<div class="log-login-title">登录</div>
						<span class="log-login-close" ng-click="logRegClose()"></span>
					</div>
					<div class="log-login-dialog-content">
						<div class="log-login-dialog-left">
							<form  method="post" name="logUsername">
								<div class="log-login-con-one log-login-con-spe">
									<div class="log-login-con-phone log-login-con-input">
										<span class="log-login-con-p-tit"> 用户名 | </span>
										<input type="text" placeholder="请输入用户名" class="log-login-con-p-con log-login-con-username" name="username" value="" id="txtUserRegistUsername"
											required ng-pattern="/^[a-zA-Z0-9_]{3,16}$/" ng-model="regRegister.un" ng-blur="regRegisterName.change(logUsername.username.$error)" />
										<span class="red" ng-repeat="FM in regRegisterName.regRegisterList | filter:regRegisterName.regRegisterVal">{{FM.tips}}</span>
										<span class="loginUsername"></span>
									</div>
								</div>
								<div class="log-login-con-one log-login-con-psw">
									<div class="log-login-con-phone log-login-con-input">
										<span class="log-login-con-p-tit">密&nbsp;&nbsp;&nbsp;&nbsp;码 | </span>
										<input type="text" placeholder="请输入密码" class="log-login-con-p-con log-login-con-password" name="userpassword" id="txtUserRegistPassword"
											required ng-pattern="/^[a-zA-Z\d_]{6,16}$/" ng-model="regRegister.psw" ng-blur="regRegisterpsw.change(logUsername.userpassword.$error)" />
										<span class="red" ng-repeat="FM in regRegisterpsw.regRegisterList | filter:regRegisterpsw.regRegisterVal">{{FM.tips}}</span>
											
									</div>
								</div>
								<div class="log-login-argument">
									<lable class="log-remind-me">
										<span class="log-icon-checkbox log-icon-checkbox-click">
										</span>
										&nbsp;&nbsp;姐，记住我
									</lable>
									<a id="log-btn-register" class="log-submit" ng-click="loginToIndex()">登陆 </a>
								</div>
							</form>
						</div>
						<div class="log-login-dialog-right">
							<div class="log-joint-login">
								<span class="log-login-icon-joint-login">合作账号登录</span>
								<ul>
									<li>
										<a href="http://d.api.budejie.com/user/weibo_login">
										<span class="log-joint-login-xinlang">
										</span>
										<span class="log-joint-login-txt">
											新浪微博
										</span>
										</a>
									</li>
									<li>
										<a href="http://d.api.budejie.com/user/qq_login">
										<span class="log-joint-login-qq">
										</span>
										<span class="log-joint-login-txt">
											QQ
										</span>
										</a>
									</li>
								</ul>
							</div>
							
							<div class="log-login-con-login">
								<span class="log-login-con-right-login">还没有账号？</span>
								<span class="log-login-con-icon-login" ng-click="regYes()"><a href="javascript:;" >注册</a></span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--注册-->
		<div id="reg-wrapper" class="reg-wrap" >
			<div class="reg-register-box" id="reg-box">
				<div class="reg-box-1">
					<div class="reg-register-dialog-header">
						<div class="reg-register-title">注册  我要做姐粉</div>
						<span class="reg-register-close" ng-click="regClose()"></span>
					</div>
					<div class="reg-register-dialog-content">
						<div class="reg-register-dialog-left">
							<form  method="post"  name="regUsername">
								<div class="reg-register-con-one reg-register-con-name">
									<div class="reg-register-con-phone reg-register-con-input">
										<span class="reg-register-con-p-tit"> 用户名 | </span>
										<input type="text" placeholder="请输入用户名" class="reg-register-con-p-con reg-register-con-username" name="username" id="txtUserRegistUsername"
											required ng-pattern="/^[a-zA-Z0-9_]{3,16}$/ " ng-model="regRegister.un" ng-blur="regRegisterName.change(regUsername.username.$error)" />
										<span class="red" ng-repeat="FM in regRegisterName.regRegisterList | filter:regRegisterName.regRegisterVal">{{FM.tips}}</span>
										<span class="regUsername"></span>
										
									</div>
								</div>
								<div class="reg-register-con-one reg-register-con-spe">
									<div class="reg-register-con-phone reg-register-con-input">
										<span class="reg-register-con-p-tit"> 手机号 | </span>
										<input type="text" placeholder="请输入手机号" class="reg-register-con-p-con reg-register-con-ph" name="userphone" id="txtUserRegistTelephone"
											required ng-pattern="/^1[3|4|5|8][0-9]\d{4,8}$/" ng-model="regRegister.up" ng-blur="regRegisterText.change(regUsername.userphone.$error)" />
										<span class="red" ng-repeat="FM in regRegisterText.regRegisterList | filter:regRegisterText.regRegisterVal">{{FM.tips}}</span>
									</div>
								</div>
								<div class="reg-register-con-one reg-register-con-psw">
									<div class="reg-register-con-phone reg-register-con-input">
										<span class="reg-register-con-p-tit">密&nbsp;&nbsp;&nbsp;&nbsp;码 | </span>
										<input type="text" placeholder="请输入密码" class="reg-register-con-p-con reg-register-con-password" name="userpassword" id="txtUserRegistPassword"
											required ng-pattern="/^[a-zA-Z\d_]{6,20}$/" ng-model="regRegister.psw" ng-blur="regRegisterpsw.change(regUsername.userpassword.$error)" />
										<span class="red" ng-repeat="FM in regRegisterpsw.regRegisterList | filter:regRegisterpsw.regRegisterVal">{{FM.tips}}</span>
											
									</div>
								</div>
								<div class="reg-register-argument">
									<lable class="reg-remind-me">
										<span class="reg-icon-checkbox">
										
										</span>
										&nbsp;&nbsp;签署姐的
									</lable>
									<a href="http://www.budejie.com/budejie/privacy.html" target="_block" class="reg-privacy">注册协议</a>
									<a id="reg-btn-register" class="reg-submit" ng-click="regToLogin()">注册</a>
								</div>
							</form>
						</div>
						<div class="reg-register-dialog-right">
							<div class="reg-register-con-login">
								<span class="reg-register-con-right-login">已有账号？</span>
								<span class="reg-register-con-icon-login" ng-click="logRegYes()"><a href="javascript:;" >登录</a></span>
							</div>
							<div class="reg-joint-login">
								<span class="reg-register-icon-joint-login">合作账号登录</span>
								<ul>
									<li>
										<a href="http://d.api.budejie.com/user/weibo_login">
										<span class="reg-joint-login-xinlang">
											
										</span>
										<span class="reg-joint-login-txt">
											新浪微博
										</span>
										</a>
									</li>
									<li>
										<a href="http://d.api.budejie.com/user/qq_login">
										<span class="reg-joint-login-qq">
											
										</span>
										<span class="reg-joint-login-txt">
											QQ
										</span>
											</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div ng-view></div>
		</div>
		
		
		<script src="js/jquery-1.12.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/angular.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/inedx.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/angular-route.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var data = window.location.search.split("=");
//			console.log(data)

		var profile_image = data[1]
		             name = data[3]
		               ct = data[5]
		             text = data[7]
		        video_uri = data[9]
		             love = data[11]
		             hate = data[13];

			//详情页面控制器
			m1.controller('details',["$scope"	,"$sce",function ($scope,$sce) {
				
				$scope.profile_image = profile_image
				$scope.name = decodeURI(name)
				$scope.ct = ct
				$scope.text = decodeURI(text)
				$scope.video_uri = video_uri
				$scope.love = love
				$scope.hate = hate
				$scope.fxNum = parseInt(Math.random()*100);
				//将地址转换白名单
				$scope.videoUrl = function(url){return $sce.trustAsResourceUrl(url); }
				//视频播放事件
				$scope.videoPlay = function (event) {
					$(event.target).hide()
					$("audio").trigger('pause');
					$(event.target).siblings().trigger('play'); 
					$(event.target).siblings().attr("controls","controls");
				}
			}])
		</script>
	</body>
</html>
